<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Label="ProjectConfigurations">
    <ProjectConfiguration Include="Release|Win32">
      <Configuration>Release</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Debug|Win32">
      <Configuration>Debug</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
  </ItemGroup>
  <PropertyGroup Label="Globals">
    <ProjectGuid>{031984BE-233E-4D2F-9DFC-AB3B1EA4CB68}</ProjectGuid>
    <Keyword>Win32Proj</Keyword>
    <RootNamespace>FreezeMagPython</RootNamespace>
    <ProjectName>FreezeMagPython</ProjectName>
  </PropertyGroup>
  <Import Project="common.props" />
  <PropertyGroup>
    <TopDir>$(MSBuildProjectDirectory)\..\</TopDir>
    <IntDir>$(MSBuildProjectDirectory)\$(Configuration)-Int-freeze\</IntDir>
    <OutDir>$(MSBuildProjectDirectory)\$(Configuration)\</OutDir>
    <PythonSourceDir>$(TopDir)\Python\</PythonSourceDir>
  </PropertyGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />
  <PropertyGroup>
    <ConfigurationType>Application</ConfigurationType>
    <CharacterSet>Unicode</CharacterSet>
    <UseDebugLibraries>false</UseDebugLibraries>
    <WholeProgramOptimization>false</WholeProgramOptimization>
  </PropertyGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
  <ImportGroup Label="ExtensionSettings">
  </ImportGroup>
  <ImportGroup Label="PropertySheets" Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
  </ImportGroup>
  <ImportGroup Label="PropertySheets" Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
  </ImportGroup>
  <PropertyGroup>
    <GenerateManifest>false</GenerateManifest>
    <TargetName>FreezeMagPython</TargetName>
  </PropertyGroup>
  <PropertyGroup>
    <!-- python.props -->
    <PySourcePath>$(PythonSourceDir)</PySourcePath>
  </PropertyGroup>
  <ItemDefinitionGroup>
    <ClCompile>
      <WarningLevel>Level3</WarningLevel>
      <PrecompiledHeader>
      </PrecompiledHeader>
      <Optimization>Disabled</Optimization>
      <PreprocessorDefinitions>WIN32;_WIN32;NDEBUG;_CRT_SECURE_NO_WARNINGS;_WINSOCK_DEPRECATED_NO_WARNINGS;%(PreprocessorDefinitions)</PreprocessorDefinitions>
      <PreprocessorDefinitions>Py_NO_ENABLE_SHARED;Py_BUILD_CORE;_CONSOLE;%(PreprocessorDefinitions)</PreprocessorDefinitions>
      <AdditionalIncludeDirectories>$(OutDir)\include</AdditionalIncludeDirectories>
      <WholeProgramOptimization>false</WholeProgramOptimization>
      <!-- from python.props -->
      <AdditionalIncludeDirectories>$(PySourcePath)Include;$(PySourcePath)Include\internal;$(PySourcePath)PC;$(IntDir);%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
      <AdditionalIncludeDirectories>$(PySourcePath)Modules\_hacl\include;$(PySourcePath)Modules\_hacl\internal;$(PySourcePath)Python;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
      <!-- end from python.props -->
      <CompileAsManaged>false</CompileAsManaged>
      <CompileAsWinRT>false</CompileAsWinRT>
      <MultiProcessorCompilation>true</MultiProcessorCompilation>
    </ClCompile>
    <Link>
      <SubSystem>Console</SubSystem>
      <AdditionalDependencies>version.lib;ws2_32.lib;pathcch.lib;bcrypt.lib;%(AdditionalDependencies)</AdditionalDependencies>
      <LinkTimeCodeGeneration>Default</LinkTimeCodeGeneration>
    </Link>
    <Lib>
      <IgnoreSpecificDefaultLibraries>libc;libcmt;%(IgnoreSpecificDefaultLibraries)</IgnoreSpecificDefaultLibraries>
      <SuppressStartupBanner>false</SuppressStartupBanner>
    </Lib>
  </ItemDefinitionGroup>
  <Target Name="FindPythonForBuild" Condition="$(PythonForBuild) == ''">
    <Exec Command="&quot;$(PySourcePath)\PCbuild\find_python.bat&quot; -q"
          EchoOff="true"
          ConsoleToMsBuild="true">
      <Output TaskParameter="ConsoleOutput" ItemName="_CmdExeLines" />
    </Exec>
    <PropertyGroup>
      <PythonForBuild>@(_CmdExeLines)</PythonForBuild>
    </PropertyGroup>
    <Error Text="Failed to locate suitable Python runtime for building from source." Condition="$(PythonForBuild)==''" />
    <Message Text="Using PythonForBuild=$(PythonForBuild)" Importance="high" />
  </Target>
  <ItemGroup>
    <ClCompile Include="$(PythonSourceDir)\Programs\_freeze_module.c" />
    <ClCompile Include="$(PythonSourceDir)\PC\config_minimal.c" />
  </ItemGroup>
  <ItemGroup>
    <ClCompile Include="$(PythonSourceDir)\Modules\atexitmodule.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\faulthandler.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\gcmodule.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\getbuildinfo.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\getpath_noop.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\posixmodule.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\signalmodule.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\timemodule.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\_tracemalloc.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\_io\_iomodule.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\_io\bufferedio.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\_io\bytesio.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\_io\fileio.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\_io\iobase.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\_io\stringio.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\_io\textio.c" />
    <ClCompile Include="$(PythonSourceDir)\Modules\_io\winconsoleio.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\abstract.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\boolobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\bytearrayobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\bytes_methods.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\bytesobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\call.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\capsule.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\cellobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\classobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\codeobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\complexobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\descrobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\dictobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\enumobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\exceptions.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\fileobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\floatobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\frameobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\funcobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\genericaliasobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\genobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\interpreteridobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\iterobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\listobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\longobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\memoryobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\methodobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\moduleobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\namespaceobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\object.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\obmalloc.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\odictobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\picklebufobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\rangeobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\setobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\sliceobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\structseq.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\tupleobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\typeobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\typevarobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\unicodectype.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\unicodeobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\unionobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Objects\weakrefobject.c" />
    <ClCompile Include="$(PythonSourceDir)\Parser\myreadline.c" />
    <ClCompile Include="$(PythonSourceDir)\Parser\parser.c" />
    <ClCompile Include="$(PythonSourceDir)\Parser\peg_api.c" />
    <ClCompile Include="$(PythonSourceDir)\Parser\pegen.c" />
    <ClCompile Include="$(PythonSourceDir)\Parser\pegen_errors.c" />
    <ClCompile Include="$(PythonSourceDir)\Parser\action_helpers.c" />
    <ClCompile Include="$(PythonSourceDir)\Parser\string_parser.c" />
    <ClCompile Include="$(PythonSourceDir)\Parser\token.c" />
    <ClCompile Include="$(PythonSourceDir)\Parser\tokenizer.c" />
    <ClCompile Include="$(PythonSourceDir)\PC\invalid_parameter_handler.c" />
    <ClCompile Include="$(PythonSourceDir)\PC\msvcrtmodule.c" />
    <ClCompile Include="$(PythonSourceDir)\PC\winreg.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\_warnings.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\asdl.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\assemble.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\ast.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\ast_opt.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\ast_unparse.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\bltinmodule.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\bootstrap_hash.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\ceval.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\codecs.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\compile.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\context.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\dtoa.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\dynamic_annotations.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\errors.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\fileutils.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\flowgraph.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\formatter_unicode.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\frame.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\future.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\getargs.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\getcompiler.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\getcopyright.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\getopt.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\getplatform.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\getversion.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\ceval_gil.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\hamt.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\hashtable.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\import.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\importdl.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\initconfig.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\intrinsics.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\instrumentation.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\legacy_tracing.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\marshal.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\modsupport.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\mysnprintf.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\mystrtoul.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pathconfig.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\perf_trampoline.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\preconfig.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pyarena.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pyctype.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pyfpe.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pyhash.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pylifecycle.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pymath.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pystate.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pystrcmp.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pystrhex.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pystrtod.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\Python-ast.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pythonrun.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\Python-tokenize.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\pytime.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\specialize.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\structmember.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\suggestions.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\symtable.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\sysmodule.c">
      <PreprocessorDefinitions>VPATH="$(PyVPath)";%(PreprocessorDefinitions)</PreprocessorDefinitions>
    </ClCompile>
    <ClCompile Include="$(PythonSourceDir)\Python\thread.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\traceback.c" />
    <ClCompile Include="$(PythonSourceDir)\Python\tracemalloc.c" />
  </ItemGroup>
  <ItemGroup>
    <!-- BEGIN frozen modules -->
    <None Include="$(PythonSourceDir)\Lib\importlib\_bootstrap.py">
      <ModName>importlib._bootstrap</ModName>
      <IntFile>$(IntDir)importlib._bootstrap.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\importlib._bootstrap.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\importlib\_bootstrap_external.py">
      <ModName>importlib._bootstrap_external</ModName>
      <IntFile>$(IntDir)importlib._bootstrap_external.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\importlib._bootstrap_external.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\zipimport.py">
      <ModName>zipimport</ModName>
      <IntFile>$(IntDir)zipimport.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\zipimport.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\abc.py">
      <ModName>abc</ModName>
      <IntFile>$(IntDir)abc.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\abc.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\codecs.py">
      <ModName>codecs</ModName>
      <IntFile>$(IntDir)codecs.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\codecs.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\io.py">
      <ModName>io</ModName>
      <IntFile>$(IntDir)io.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\io.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\_collections_abc.py">
      <ModName>_collections_abc</ModName>
      <IntFile>$(IntDir)_collections_abc.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\_collections_abc.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\_sitebuiltins.py">
      <ModName>_sitebuiltins</ModName>
      <IntFile>$(IntDir)_sitebuiltins.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\_sitebuiltins.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\genericpath.py">
      <ModName>genericpath</ModName>
      <IntFile>$(IntDir)genericpath.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\genericpath.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\ntpath.py">
      <ModName>ntpath</ModName>
      <IntFile>$(IntDir)ntpath.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\ntpath.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\posixpath.py">
      <ModName>posixpath</ModName>
      <IntFile>$(IntDir)posixpath.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\posixpath.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\os.py">
      <ModName>os</ModName>
      <IntFile>$(IntDir)os.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\os.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\site.py">
      <ModName>site</ModName>
      <IntFile>$(IntDir)site.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\site.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\stat.py">
      <ModName>stat</ModName>
      <IntFile>$(IntDir)stat.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\stat.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\importlib\util.py">
      <ModName>importlib.util</ModName>
      <IntFile>$(IntDir)importlib.util.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\importlib.util.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\importlib\machinery.py">
      <ModName>importlib.machinery</ModName>
      <IntFile>$(IntDir)importlib.machinery.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\importlib.machinery.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\runpy.py">
      <ModName>runpy</ModName>
      <IntFile>$(IntDir)runpy.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\runpy.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\__hello__.py">
      <ModName>__hello__</ModName>
      <IntFile>$(IntDir)__hello__.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\__hello__.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\__phello__\__init__.py">
      <ModName>__phello__</ModName>
      <IntFile>$(IntDir)__phello__.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\__phello__.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\__phello__\ham\__init__.py">
      <ModName>__phello__.ham</ModName>
      <IntFile>$(IntDir)__phello__.ham.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\__phello__.ham.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\__phello__\ham\eggs.py">
      <ModName>__phello__.ham.eggs</ModName>
      <IntFile>$(IntDir)__phello__.ham.eggs.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\__phello__.ham.eggs.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Lib\__phello__\spam.py">
      <ModName>__phello__.spam</ModName>
      <IntFile>$(IntDir)__phello__.spam.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\__phello__.spam.h</OutFile>
    </None>
    <None Include="$(PythonSourceDir)\Tools\freeze\flag.py">
      <ModName>frozen_only</ModName>
      <IntFile>$(IntDir)frozen_only.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\frozen_only.h</OutFile>
    </None>
    <!-- END frozen modules -->
  </ItemGroup>
  <ItemGroup>
    <!-- We manually freeze getpath.py rather than through freeze_modules -->
    <GetPath Include="$(PythonSourceDir)\Modules\getpath.py">
      <ModName>getpath</ModName>
      <IntFile>$(IntDir)getpath.g.h</IntFile>
      <OutFile>$(PySourcePath)Python\frozen_modules\getpath.h</OutFile>
    </GetPath>
  </ItemGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
  <ImportGroup Label="ExtensionTargets">
  </ImportGroup>
  <Target Name="_RebuildGetPath" AfterTargets="_RebuildFrozen" Condition="$(Configuration) != 'PGUpdate'">
    <Exec Command='"$(TargetPath)" "%(GetPath.ModName)" "%(GetPath.FullPath)" "%(GetPath.IntFile)"' />

    <Copy SourceFiles="%(GetPath.IntFile)"
          DestinationFiles="%(GetPath.OutFile)"
          Condition="!Exists(%(GetPath.OutFile)) or (Exists(%(GetPath.IntFile)) and '$([System.IO.File]::ReadAllText(%(GetPath.OutFile)).Replace(`&#x0D;&#x0A;`, `&#x0A;`))' != '$([System.IO.File]::ReadAllText(%(GetPath.IntFile)).Replace(`&#x0D;&#x0A;`, `&#x0A;`))')">
      <Output TaskParameter="CopiedFiles" ItemName="_UpdatedGetPath" />
    </Copy>

    <Message Text="Updated files: @(_UpdatedGetPath->'%(Filename)%(Extension)',', ')"
             Condition="'@(_UpdatedGetPath)' != ''" Importance="high" />
  </Target>
  <Target Name="_RebuildFrozen" AfterTargets="AfterBuild" Condition="$(Configuration) != 'PGUpdate'">
    <Exec Command='"$(TargetPath)" "%(None.ModName)" "%(None.FullPath)" "%(None.IntFile)"' />

    <Copy SourceFiles="%(None.IntFile)"
          DestinationFiles="%(None.OutFile)"
          Condition="!Exists(%(None.OutFile)) or (Exists(%(None.IntFile)) and '$([System.IO.File]::ReadAllText(%(None.OutFile)).Replace(`&#x0D;&#x0A;`, `&#x0A;`))' != '$([System.IO.File]::ReadAllText(%(None.IntFile)).Replace(`&#x0D;&#x0A;`, `&#x0A;`))')">
      <Output TaskParameter="CopiedFiles" ItemName="_Updated" />
    </Copy>

    <Message Text="Updated files: @(_Updated->'%(Filename)%(Extension)',', ')"
             Condition="'@(_Updated)' != ''" Importance="high" />
  </Target>
  <Target Name="_RebuildDeepFrozen"
          AfterTargets="_RebuildFrozen"
          DependsOnTargets="FindPythonForBuild"
          Condition="$(Configuration) != 'PGUpdate'">
    <!-- BEGIN deepfreeze rule -->
	<Exec Command='$(PythonForBuild) "$(PySourcePath)Tools\build\deepfreeze.py" ^
		 "$(PySourcePath)Python\frozen_modules\importlib._bootstrap.h:importlib._bootstrap" ^
		 "$(PySourcePath)Python\frozen_modules\importlib._bootstrap_external.h:importlib._bootstrap_external" ^
		 "$(PySourcePath)Python\frozen_modules\zipimport.h:zipimport" ^
		 "$(PySourcePath)Python\frozen_modules\abc.h:abc" ^
		 "$(PySourcePath)Python\frozen_modules\codecs.h:codecs" ^
		 "$(PySourcePath)Python\frozen_modules\io.h:io" ^
		 "$(PySourcePath)Python\frozen_modules\_collections_abc.h:_collections_abc" ^
		 "$(PySourcePath)Python\frozen_modules\_sitebuiltins.h:_sitebuiltins" ^
		 "$(PySourcePath)Python\frozen_modules\genericpath.h:genericpath" ^
		 "$(PySourcePath)Python\frozen_modules\ntpath.h:ntpath" ^
		 "$(PySourcePath)Python\frozen_modules\posixpath.h:posixpath" ^
		 "$(PySourcePath)Python\frozen_modules\os.h:os" ^
		 "$(PySourcePath)Python\frozen_modules\site.h:site" ^
		 "$(PySourcePath)Python\frozen_modules\stat.h:stat" ^
		 "$(PySourcePath)Python\frozen_modules\importlib.util.h:importlib.util" ^
		 "$(PySourcePath)Python\frozen_modules\importlib.machinery.h:importlib.machinery" ^
		 "$(PySourcePath)Python\frozen_modules\runpy.h:runpy" ^
		 "$(PySourcePath)Python\frozen_modules\__hello__.h:__hello__" ^
		 "$(PySourcePath)Python\frozen_modules\__phello__.h:__phello__" ^
		 "$(PySourcePath)Python\frozen_modules\__phello__.ham.h:__phello__.ham" ^
		 "$(PySourcePath)Python\frozen_modules\__phello__.ham.eggs.h:__phello__.ham.eggs" ^
		 "$(PySourcePath)Python\frozen_modules\__phello__.spam.h:__phello__.spam" ^
		 "$(PySourcePath)Python\frozen_modules\frozen_only.h:frozen_only" ^
		 "-o" "$(PySourcePath)Python\deepfreeze\deepfreeze.c"'/>
    <!-- END deepfreeze rule -->
  </Target>
  <Target Name="_CleanFrozen" BeforeTargets="CoreClean" Condition="$(Configuration) != 'PGUpdate'">
    <ItemGroup>
      <Clean Include="%(None.IntFile)" />
      <Clean Include="%(None.OutFile)" />
      <Clean Include="%(GetPath.IntFile)" />
      <Clean Include="%(GetPath.OutFile)" />
      <Clean Include="$(PySourcePath)Python\deepfreeze\deepfreeze.c" />
    </ItemGroup>
  </Target>
</Project>
